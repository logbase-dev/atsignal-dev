````markdown
# ğŸ“¨ Stibee API ì—°ë™ ì„¤ê³„ì„œ (í…œí”Œë¦¿ ê´€ë¦¬ í¬í•¨)

**ì‘ì„±ì¼:** 2025-11-06
**ì‘ì„±ì:** ì´ë¯¼ê·œ
**ëª©ì :** Nethru ì›¹ì‚¬ì´íŠ¸ ë‚´ ë‰´ìŠ¤ë ˆí„° ìë™ ë°œì†¡ ê¸°ëŠ¥ì„ ìœ„í•´ Stibee APIë¥¼ ì—°ë™í•˜ê³ , í…œí”Œë¦¿ ê´€ë¦¬ ì „ëµì„ ì •ì˜í•œë‹¤.

---

## 1. ê°œìš”

ë³¸ ë¬¸ì„œëŠ” Stibee APIë¥¼ ì´ìš©í•´ ë‰´ìŠ¤ë ˆí„°ë¥¼ ìë™ ë°œì†¡í•˜ê¸° ìœ„í•œ ì—°ë™ êµ¬ì¡° ë° ê°œë°œ ê°€ì´ë“œë¥¼ ì •ì˜í•œë‹¤.
Nethru í”„ë¡œì íŠ¸ì—ì„œëŠ” ë‹¤ìŒ ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ë‰´ìŠ¤ë ˆí„°ë¥¼ ë°œì†¡í•  ìˆ˜ ìˆë‹¤.

1. **ìŠ¤í‹°ë¹„ ì½˜ì†”ì—ì„œ ì œì‘í•œ í…œí”Œë¦¿ì„ APIë¡œ í˜¸ì¶œí•˜ì—¬ ë°œì†¡**
2. **ë°±ì—”ë“œì—ì„œ HTML í…œí”Œë¦¿ì„ ì§ì ‘ ìƒì„±í•˜ì—¬ APIë¡œ ë°œì†¡**

---

## 2. ì‹œìŠ¤í…œ êµ¬ì„±ë„

```plaintext
[ì‚¬ìš©ì ìš”ì²­]
       â”‚
       â–¼
[Nethru Backend Server] â”€â”€â”€â–¶ [Stibee API Server]
       â”‚                           â”‚
       â–¼                           â–¼
  (DB: Template Metadata)     (Stibee Campaign)
```
````

- **Nethru Backend**: í…œí”Œë¦¿ ê´€ë¦¬, êµ¬ë…ì ì •ë³´, ë°œì†¡ ìš”ì²­ ì²˜ë¦¬
- **Stibee API Server**: ì‹¤ì œ ì´ë©”ì¼ ë°œì†¡ ë‹´ë‹¹
- **DB**: í…œí”Œë¦¿ ë©”íƒ€ë°ì´í„°, ë°œì†¡ ë¡œê·¸ ì €ì¥

---

## 3. Stibee ì£¼ìš” ê°œë…

| êµ¬ë¶„                 | ì„¤ëª…                                                        |
| -------------------- | ----------------------------------------------------------- |
| **ë¦¬ìŠ¤íŠ¸(List)**     | ë‰´ìŠ¤ë ˆí„°ë¥¼ ìˆ˜ì‹ í•˜ëŠ” êµ¬ë…ì ê·¸ë£¹ (ì˜ˆ: ì „ì²´íšŒì›, ìœ ë£Œê³ ê° ë“±) |
| **ìº í˜ì¸(Campaign)** | ì‹¤ì œ ë°œì†¡ë˜ëŠ” ì´ë©”ì¼ ë‹¨ìœ„                                   |
| **í…œí”Œë¦¿(Template)** | ì´ë©”ì¼ ì½˜í…ì¸  êµ¬ì¡°(ë””ìì¸, ë³¸ë¬¸ ë“±)                         |
| **API Key**          | Stibee ì—°ë™ ì‹œ ì‚¬ìš©í•˜ëŠ” ì¸ì¦ í† í°                           |

---

## 4. ì—°ë™ ë°©ì‹ ë¹„êµ

| í•­ëª©             | ìŠ¤í‹°ë¹„ í…œí”Œë¦¿ ì‚¬ìš©     | ë°±ì—”ë“œ HTML ì§ì ‘ ìƒì„±    |
| ---------------- | ---------------------- | ------------------------ |
| í…œí”Œë¦¿ ì œì‘      | Stibee ê´€ë¦¬ìì—ì„œ ì‘ì„± | ë‚´ë¶€ HTMLë¡œ ìƒì„±         |
| í…œí”Œë¦¿ ì¡°íšŒ API  | âŒ ì œê³µ ì•ˆ í•¨          | âœ… ìì²´ DBì—ì„œ ê´€ë¦¬ ê°€ëŠ¥ |
| ìë™ ë°œì†¡(API)   | âœ… ê°€ëŠ¥                | âœ… ê°€ëŠ¥                  |
| ìˆ˜ì • í¸ì˜ì„±      | ë§ˆì¼€íŒ…íŒ€ ì¤‘ì‹¬          | ê°œë°œíŒ€ ì¤‘ì‹¬              |
| ë™ì  ë°ì´í„° ë°˜ì˜ | ì œí•œì                  | ììœ ë¡­ê²Œ ê°€ëŠ¥            |
| ê¶Œì¥ ìš©ë„        | ì •ê¸° ë‰´ìŠ¤ë ˆí„°          | ì´ë²¤íŠ¸Â·íŠ¸ë¦¬ê±°í˜• ì´ë©”ì¼   |

---

## 5. API ì—°ë™ ì ˆì°¨

### 5.1. ì‚¬ì „ ì¤€ë¹„

1. Stibee ê´€ë¦¬ì ì½˜ì†” ì ‘ì†

   â†’ í™˜ê²½ì„¤ì • > API Key ë°œê¸‰

   â†’ `.env` íŒŒì¼ì— ì €ì¥:

   ```bash
   STIBEE_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxx

   ```

2. êµ¬ë…ì ë¦¬ìŠ¤íŠ¸ ìƒì„±

   â†’ ì˜ˆ: â€œNethru Subscribersâ€

   â†’ ë¦¬ìŠ¤íŠ¸ ID í™•ì¸ (`listId`)

---

### 5.2. ìº í˜ì¸ ìƒì„± ë° ë°œì†¡

### âœ… [POST] Create Campaign

**Endpoint**

```
POST https://api.stibee.com/v1/lists/{listId}/campaigns

```

**Headers**

```
AccessToken: {STIBEE_API_KEY}
Content-Type: application/json

```

**Request Body ì˜ˆì‹œ (HTML ì§ì ‘ ì‘ì„± ë°©ì‹)**

```json
{
  "title": "Nethru Feature Update - November 2025",
  "subject": "Nethruì˜ ìƒˆë¡œìš´ ë°ì´í„° ë¶„ì„ ê¸°ëŠ¥ì„ ì†Œê°œí•©ë‹ˆë‹¤",
  "body": "<html><body><h1>ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶œì‹œ</h1><p>ì„¸ë¶€ ë‚´ìš©ì€ ì›¹ì‚¬ì´íŠ¸ì—ì„œ í™•ì¸í•˜ì„¸ìš”.</p></body></html>",
  "senderName": "Nethru Team",
  "senderEmail": "newsletter@nethru.co.kr",
  "emailType": "html"
}
```

**Response**

```json
{
  "message": "Campaign created successfully",
  "campaignId": "abc12345",
  "status": "ready"
}
```

---

### 5.3. êµ¬ë…ì ê´€ë¦¬ API

### âœ… [POST] Add Subscriber

```
POST https://api.stibee.com/v1/lists/{listId}/subscribers

```

**Body ì˜ˆì‹œ**

```json
{
  "subscribers": [
    {
      "email": "user1@example.com",
      "name": "í™ê¸¸ë™",
      "memo": "ì‹ ê·œ êµ¬ë…ì"
    }
  ]
}
```

---

## 6. í…œí”Œë¦¿ ê´€ë¦¬ ì „ëµ

### 6.1. ìŠ¤í‹°ë¹„ ì½˜ì†” í…œí”Œë¦¿ ì‚¬ìš© ì‹œ

- Stibee APIëŠ” í…œí”Œë¦¿ ëª©ë¡ì„ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ì„ **ì œê³µí•˜ì§€ ì•ŠìŒ**.
- ë”°ë¼ì„œ, ìŠ¤í‹°ë¹„ì—ì„œ ë§Œë“  í…œí”Œë¦¿ì˜ **ì´ë¦„, ID, ì„¤ëª…**ì„ ë°±ì—”ë“œ DBì— ì €ì¥í•´ì•¼ í•¨.

**ì˜ˆì‹œ í…Œì´ë¸” êµ¬ì¡°**

| í•„ë“œëª…             | ì„¤ëª…             |
| ------------------ | ---------------- |
| id                 | ë‚´ë¶€ PK          |
| stibee_template_id | ìŠ¤í‹°ë¹„ í…œí”Œë¦¿ ID |
| name               | í…œí”Œë¦¿ ì´ë¦„      |
| description        | ìš©ë„ ì„¤ëª…        |
| created_at         | ìƒì„±ì¼           |
| updated_at         | ìˆ˜ì •ì¼           |

---

### 6.2. ë°±ì—”ë“œ HTML í…œí”Œë¦¿ ìƒì„± ì‹œ

- í…œí”Œë¦¿ íŒŒì¼ì„ `/templates/newsletter/` ë””ë ‰í† ë¦¬ ë‚´ì—ì„œ HTMLë¡œ ê´€ë¦¬
- Python (Jinja2) ë˜ëŠ” Node (EJS ë“±) í…œí”Œë¦¿ ì—”ì§„ ì‚¬ìš©
- ë³€ìˆ˜ ë°”ì¸ë”©ìœ¼ë¡œ ì‚¬ìš©ìëª…, ë‚ ì§œ, ë‰´ìŠ¤ ì£¼ì œ ë“±ì„ ìë™ ì‚½ì… ê°€ëŠ¥

**ì˜ˆì‹œ: newsletter_update.html**

```html
<html>
  <body>
    <h1>ì•ˆë…•í•˜ì„¸ìš”, {{ user_name }}ë‹˜!</h1>
    <p>{{ update_summary }}</p>
  </body>
</html>
```

---

## 7. ë°œì†¡ ë¡œê·¸ ë° ì˜¤ë¥˜ ê´€ë¦¬

| í•­ëª©              | ì„¤ëª…                                              |
| ----------------- | ------------------------------------------------- |
| **ìš”ì²­ ë¡œê·¸**     | ë°œì†¡ ìš”ì²­ ì‹œë§ˆë‹¤ campaignId, ìˆ˜ì‹ ì ìˆ˜, ìƒíƒœ ì €ì¥ |
| **ì—ëŸ¬ ë¡œê·¸**     | ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ì½”ë“œ, ì‘ë‹µ ë©”ì‹œì§€ ì €ì¥               |
| **ì¬ì‹œë„ ì •ì±…**   | ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë°œìƒ ì‹œ 3íšŒê¹Œì§€ ì¬ì‹œë„              |
| **ìƒíƒœ ëª¨ë‹ˆí„°ë§** | ìŠ¤í‹°ë¹„ API ì‘ë‹µ ì½”ë“œ 200/400/500 êµ¬ë¶„ ì²˜ë¦¬        |

---

## 8. ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

- API KeyëŠ” ì ˆëŒ€ ì½”ë“œì— í•˜ë“œì½”ë”©í•˜ì§€ ë§ê³  í™˜ê²½ë³€ìˆ˜ë¡œ ê´€ë¦¬
- ë°œì†¡ ìš”ì²­ ì‹œ SSL(TLS) í†µì‹  í•„ìˆ˜
- êµ¬ë…ì ì´ë©”ì¼ ì•”í˜¸í™” ì €ì¥
- ì™¸ë¶€ ë¡œê·¸ì— ê°œì¸ì •ë³´(ì´ë©”ì¼ ì£¼ì†Œ) ë…¸ì¶œ ê¸ˆì§€

---

## 9. í–¥í›„ í™•ì¥ ê³„íš

| í•­ëª©           | ë‚´ìš©                                 |
| -------------- | ------------------------------------ |
| í…œí”Œë¦¿ ê´€ë¦¬ UI | ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ Stibee í…œí”Œë¦¿ ë§¤í•‘ |
| ë°œì†¡ ì˜ˆì•½ ê¸°ëŠ¥ | íŠ¹ì • ë‚ ì§œ/ì‹œê°„ì— ìë™ ë°œì†¡           |
| A/B í…ŒìŠ¤íŠ¸     | ë‘ ê°€ì§€ í…œí”Œë¦¿ìœ¼ë¡œ ì„±ê³¼ ë¹„êµ         |
| Webhook        | Stibee ë°œì†¡ ì™„ë£Œ ì´ë²¤íŠ¸ ìˆ˜ì‹  ì²˜ë¦¬    |

---

## 10. ì°¸ê³  ë§í¬

- [Stibee API ê³µì‹ ë¬¸ì„œ](https://stibee.com/api/docs)
- [Stibee ê°œë°œì ê°€ì´ë“œ](https://help.stibee.com/hc/ko/categories/360002284953-API)
- [Nethru í”„ë¡œì íŠ¸ ìœ„í‚¤ (ë‚´ë¶€ ê³µìœ ìš©)](https://github.com/nethru/docs)

---

## ğŸ“Œ ì •ë¦¬

> ìŠ¤í‹°ë¹„ í…œí”Œë¦¿ì„ APIë¡œ ì¡°íšŒí•  ìˆ˜ëŠ” ì—†ì§€ë§Œ,
>
> **í…œí”Œë¦¿ IDë‚˜ HTML ë³¸ë¬¸ì„ ì§ì ‘ ì§€ì •í•´ ë°œì†¡ì€ ê°€ëŠ¥í•˜ë‹¤.**
>
> ë”°ë¼ì„œ, í…œí”Œë¦¿ ì •ë³´ë¥¼ ë‚´ë¶€ DBë¡œ ê´€ë¦¬í•˜ë©´
>
> â€œìŠ¤í‹°ë¹„ ê¸°ë°˜ ìë™ ë‰´ìŠ¤ë ˆí„° ë°œì†¡ ì‹œìŠ¤í…œâ€ êµ¬ì¶•ì´ ê°€ëŠ¥í•˜ë‹¤.
